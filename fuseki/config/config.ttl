## ============================================================
## Production Fuseki Configuration - Graph Middleware
## Single TDB2 Dataset: "ontologies"
## ============================================================

@prefix fuseki:  <http://jena.apache.org/fuseki#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix tdb2:    <http://jena.apache.org/2016/tdb#> .
@prefix ja:      <http://jena.hpl.hp.com/2005/11/Assembler#> .
@prefix :        <#> .

## Server configuration
[] rdf:type fuseki:Server ;
   fuseki:services ( :service ) .

## ============================================================
## Service: ontologies
## Purpose: Primary semantic ontology storage for DBC, GIST, SOW
## ============================================================

:service rdf:type fuseki:Service ;
    fuseki:name "ontologies" ;
    fuseki:dataset :dataset ;

    # SPARQL Query endpoints
    fuseki:endpoint [
        fuseki:operation fuseki:query ;
        fuseki:name "query"
    ] ;
    fuseki:endpoint [
        fuseki:operation fuseki:query ;
        fuseki:name "sparql"  # Standard SPARQL endpoint
    ] ;

    # SPARQL Update endpoint
    fuseki:endpoint [
        fuseki:operation fuseki:update ;
        fuseki:name "update"
    ] ;

    # Graph Store Protocol - Read/Write
    fuseki:endpoint [
        fuseki:operation fuseki:gsp-rw ;
        fuseki:name "data"
    ] ;

    # Graph Store Protocol - Read Only
    fuseki:endpoint [
        fuseki:operation fuseki:gsp-r ;
        fuseki:name "get"
    ] ;

    # File Upload endpoint
    fuseki:endpoint [
        fuseki:operation fuseki:upload ;
        fuseki:name "upload"
    ] .

## ============================================================
## Dataset: TDB2 with persistent storage
## Location: /fuseki/databases/ontologies
## ============================================================

:dataset rdf:type tdb2:DatasetTDB2 ;
    tdb2:location "/fuseki/databases/ontologies" .

## ============================================================
## Configuration Notes:
##
## - TDB2 provides ACID transactions and crash recovery
## - Data persists across container restarts
## - Uses default graph for all ontology data
## - All SPARQL 1.1 Query, Update, and GSP operations supported
## - Upload endpoint accepts RDF files (Turtle, RDF/XML, JSON-LD, N-Triples)
##
## Endpoints:
##   Query:  http://localhost:3030/ontologies/sparql
##   Update: http://localhost:3030/ontologies/update
##   GSP:    http://localhost:3030/ontologies/data
##   Upload: http://localhost:3030/ontologies/upload
## ============================================================
